<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
  <title>WSO2 WSF Installation Guide</title>
  <link href="style/api_style.css" rel="stylesheet" type="text/css"
  media="all" />
</head>

<body>
<h1>WSO2 WSF/PHP Installation Guide</h1>

<p>This document will guide you on how to install WSO2 Web Services
Framework/PHP extension and run the server and client samples on Linux and
Microsoft Windows operating systems.</p>

<p>Please send your feedback to the user mailing list: <a
href="mailto:wsf-php-user@wso2.org">wsf-php-user@wso2.org</a>. Kindly see <a
href="https://www-lk.wso2.com/repo/wso2/php_axis2/extension/xdocs/index.html#mail">Home
page</a> for subscription.</p>

<h2>Contents</h2>
<ul>
  <li><a href="#Common Installation Instructions">Common Installation
    Instructions</a></li>
  <li><a href="#1.Installing and Running on Linuxs">Installing and Running on
    Linux</a></li>
  <li><a
    href="#2.Installing and Running on Microsoft Windows (win32)">Installing
    and Running on Microsoft Windows (win32)</a>
    <ul>
      <li><a href="#Build PHP on Windows">Build PHP on MS Windows</a></li>
      <li><a href="#Build WSO2 WSF for C on Windows from Source">Building WSO2
        WSF/C on MS Windows from Source</a>
        <ul>
          <li><a href="#Requirements">Requirements</a></li>
          <li><a href="#Building WSF/PHP From Source">Building WSF/PHP From Source</a></li>
        </ul>
      </li>
      <li><a
        href="#Building WSO2 WSF for PHP on Windows from Source">Building
        WSO2 WSF/PHP on MS Windows from Source</a></li>
      <li><a href="#Installing WSO2 WSF As a PHP Extension">Installing WSO2
        WSF As a PHP Extension</a></li>
    </ul>
  </li>
</ul>
<a id="Common Installation Instructions"></a>

<h2>Common Installation Instructions</h2>

<p>To get the distributions working, you need the following installed in your
system.</p>
<ul>
  <li>PHP 5.1.1 or later, which can be downloaded from <a
    href="http://www.php.net/">PHP </a> official Web site. Please refer to
    the additional note on installing PHP as a DSO module to Apache2 Web
    server.
    <p>If you are using a pre-installed version of PHP, please make sure that
    you have the developer version installed, so that you can compile WSO2
    WSF/PHP source.</p>
  </li>
  <li>libxml2, which can be downloaded from <a
    href="http://xmlsoft.org/downloads.html">here</a> (NOTE: Most Linux
    systems have libxml2 by default.)</li>
</ul>
<a id="1.Installing and Running on Linuxs"></a>

<h2>1. Installing and Running on Linux</h2>

<p>1. Go to the directory where you have extracted the source distribution.
Run the following:</p>
<ul>
  <li>./configure</li>
  <li>make</li>
  <li>make install</li>
</ul>

<p>Note: You may require super user privileges to run 'make install' on your
system.</p>

<p>2. After installing the extension, you have to edit the php.ini file and
add the following line to the php.ini file:<br />
<b><i>extension=wsf.so</i></b></p>

<p>Now you are ready to use WSO2 WSF/PHP.</p>

<p>3. Copy the scripts folder to your Web server's document root.</p>

<p>4. Also copy all the samples to your Web server's document root.</p>

<p>5. Test with a Web browser; as an example access <h
href=http://localhost/echo_client.php>http://localhost/echo_client.php</h></p>

<p><i>NOTES:</i></p>
<ul>
  <li><i>You may run './configure --help' for more information on configure
    options.</i></li>
  <li><i>If you don't provide the --prefix configure option, WSO2 WSF/PHP
    will by default be installed into the PHP extensions directory.</i></li>
  <li><i>If you provide the --prefix configure option you will have to edit
    the php.ini file in your system and add the following entry.</i></li>
  <li><i>Note that WSO2 WSF/C would be installed to a folder named "wsf_c" in
    the prefix folder.<br />
    <b>[wsf] wsf.home="path to your wsf_c installation directory"</b><br />
    </i></li>
</ul>
<a id="2.Installing and Running on Microsoft Windows (win32)"></a>

<h2>2. Installing and Running on Microsoft Windows (win32)</h2>
<a id="Build PHP on Windows"></a>

<h3>Build PHP on MS Windows</h3>

<p>Please refer to README.WIN32-BUILD-SYSTEM file that comes with PHP source
distribution.</p>
<a id="Build WSO2 WSF for C on Windows from Source"></a>

<h3>Build WSO2 WSF/C on MS Windows from Source</h3>
<a id="Requirements"></a>

<h4>Requirements</h4>

<p>You need to download following:</p>
<ul>
  <li>libxml2 binary distribution</li>
  <li>zlib binary distribution</li>
  <li>iconv binary distribution</li>
</ul>
<a id="Building WSF/PHP From Source"></a>

<h3>Building WSF/PHP From Source </h3>

<p>1. If you have Visual Studio command prompt, open it and change directory
to wso2-wsf-php extract folder.<br />
</p>

<p>2. If not, create a new shortcut and set target to:<br />
<b>        %comspec% /k "C:\Program Files\Microsoft Visual Studio .NET
2003\Vc7\bin\vcvars32.bat"</b><br />
</p>

<p>3. Now change directory to wso2-wsf-php-src extract directory and edit 
	the configure.in file and set your binary installation 
	locations of libxml2, zlib and iconv , OpenSSL<br />
</p>

<p>4.Also you need to specify the php source directory and its binary build location
	to build the extension along with wsf_c. Please fill the following entries in 
	configure.in file. PHP_SRC_DIR, PHP_BIN_DIR and WIN32BUILD_DIR.</p>
	
<p>5.Once you have done it, run build.bat file in  wso2-wsf-php-src extract directory. This
	will build create the binary distribution.</p>
	
<a id="Building WSO2 WSF for PHP on Windows from Source"></a>

<h3>Building WSO2 WSF/PHP extension with PHP WIN32 build system</h3>

<p>1. Before trying this, please refer README.WIN32-BUILD-SYSTEM file in PHP
source distribution and build PHP source under MS Windows.</p>

<p>2.&nbsp; Copy wsf_php folder to php_source/ext directory.</p>

<p>3. Run buildconf.bat file to rebuild the configure.js file.</p>

<p>4. "cscript /nologo configure.js --help" will give the configuration
options. You will find the option --with-wsf.<br />
</p>

<p>5. Add following entries to config.nice.bat file.</p>

<p>    &nbsp; &nbsp; "--with-extra-includes=&lt;Libxml2 bin dir&gt;\include;&lt;iconv bin
directory&gt;\include;&lt;zlib bin dir&gt;\include;&lt;wsf-c dir&gt;\include"
</p>

<p>    &nbsp; &nbsp; "-- with-extra-libs=&lt;Libxml2 bin dir&gt;\lib;&lt;iconv bin
dir&gt;\lib;&lt;zlib bin dir&gt;\lib;&lt;wsf-c dir&gt;\lib"</p>

<p>    &nbsp; &nbsp; "--with-wsf=shared"</p>

<p>6. Run above config.nice.bat file to configure the wsf extension as a
dll.</p>

<p>7. "nmake" will build wsf extension.<br />
</p>
<a id="Installing WSO2 WSF As a PHP Extension"></a>

<h3>Installing WSO2 WSF As a PHP Extension</h3>

<p>1. If you have built from the source you should now have the wsf_c binary
and the wsf.dll.<br />
</p>

<p>2. If you have extracted the binary you should have the following
structure.</p>
<pre>    wso2_wsfphp_1.0.alpha1-bin
                    |
                    +-- wsf_c
                    |
                    +-- wsf.dll</pre>

<p>3. Copy wsf.dll to PHP installation directory.</p>

<p>4. Add wsf_c\lib directory to path.</p>

<p>5. Add the following entries to your php.ini file which is in your PHP
installation location.<br />
</p>
<pre>       [wsf]
       wsf.home="<path_to_extract_folder>\wsf_c"
       wsf.log_path="<path_to_extract_folder>\wsf_c\logs"

       extension=wsf.dll</path_to_extract_folder></path_to_extract_folder></pre>

<p>6. Create an environment variable PHPRC to point to your php.ini file
location.</p>

<p>7. Configure the Apache2 Web server with PHP as follows.<br />
</p>

<p>8. Copy php5apache2.dll to Apache2/modules directory. Add following
entries in httpd.conf file.<br />
</p>

<p>9. LoadModule php5_module modules/php5apache2.dll <br />
</p>

<p>10. AddType application/x-httpd-php .php .phtml<br />
</p>

<p>11. AddType application/x-httpd-php-source .phps<br />
</p>

<p>12. Copy the scripts folder and all the samples to your Web server's
document root</p>

<p>Now you should be able to run the samples in samples directory.</p>
</body>
</html>
